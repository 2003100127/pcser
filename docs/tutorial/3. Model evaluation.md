Next, we can evaluate the model on stealth effect prediction.

# Usage
We first need to load data from Excel and put the full path to the data in attribute `input_fpn`. Please refer to [this page]() for organising your own data. As a necessity for referece, we need to put proteomics features in order by using `data_ref_fpn` again.

We recommend using the best-performing cross-validation model from model building processes and place it in `model_fpn`.

We will predict the stealth effect(s) of your provided sample(s), which is(are) normalised. But if you want to recover it/them to the MFI values, you need to provide one MFI values or more in the PBS environment, which means they are not measured with any pre-coating nanoparticles and in any plasma challenges. For the recovery, please put a single value or a Python list containing MFI values in `mfi_ref`. Due to reading the reference data in, you also need to specified or leave the attributes unmoved, `is_norm`, `norm_met`, `mode`, `mark`, and `version`. 

=== "Composition"

    ``` py
    import pcser as pcs

    pcs.load.evaluate(
        data_ref_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/Proteomics_07262023_rv_C57BL6_spl54.xlsx',
        sv_fp='D:/Document/Programming/Python/pcser/pcser/data/',  # None to('data/')
        input_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/example.xlsx',
        model_fpn='D:/Document/Programming/Python/pcser/pcser/data/model/best_cv.joblib',
        sheet_name='a', # a b
        # mfi_ref=[10271.33333, 10747, 10303.33333, 9663.333333, 10056],
        mfi_ref=[3606.333333, 3606.333333, 3606.333333, 3606.333333],
    
        is_norm=True,
        norm_met='minmax',  # minmax std maxabs
        mode='compo',  # compo annot
        mark='spl54',  # spl54 spl63
        version='extended',  # extended old
    )
    
    ```

=== "Annotation"

    ``` py
    import pcser as pcs

    pcs.load.evaluate(
        data_ref_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/Proteomics_07262023_rv_C57BL6_spl54.xlsx',
        sv_fp='D:/Document/Programming/Python/pcser/pcser/data/',  # None to('data/')
        input_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/example.xlsx',
        model_fpn='D:/Document/Programming/Python/pcser/pcser/data/model/best_cv.joblib',
        sheet_name='a', # a b
        # mfi_ref=[10271.33333, 10747, 10303.33333, 9663.333333, 10056],
        mfi_ref=[3606.333333, 3606.333333, 3606.333333, 3606.333333],
    
        is_norm=True,
        norm_met='minmax',  # minmax std maxabs
        mode='annot',  # compo annot
        mark='spl54',  # spl54 spl63
        version='extended',  # extended old
    )
            
    ``` 


# Attributes
!!! Illustration

    === "Regular"
        
        ``` c++ 
        data_ref_fpn: full path to data used for training and as a reference for further use
        sv_fp: full path to save data. Please note that it will save the training data and resulting data if it is not set as None.
        is_norm: if data is normalised. Default: True
        norm_met: normalisation method. It can be minmax, std, or maxabs.
        mode: composition or annotation. It can be compo or annot. Default: compo 
        mark: mark for denoting and being part of file name.
        seed: seed to shufle data and train models. Default: 4
        version: It can be extended or old. extended will include added PBS data. Default: 'extended'
        
        ```

    === "Added"

        ``` c++
        input_fpn: full path to an excel file having proteomics data to be predicted in a singular or batch manner.
        model_fpn: full path to a model built 
        sheet_name: sheet name of the excel file
        mfi_ref: float or list. MFI value(s)

        ```


# Output

`df` contains PCSER predictions of the stealth effects and MFI values.

=== "Composition"

    ``` py
    You are using extended sheets.
    You have selected the minmax normalization method.
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Data summary:
    Number of samples: 54
    Number of features: 419
    You have the samples: ['HuApoA1', 'MoApoA1', 'HuClusterin', 'MoClusterin']
    PCSER predictions: 
                 stealth_effect          MFI
    HuApoA1            0.670762  3099.790003
    MoApoA1            0.662108  3189.458730
    HuClusterin        0.634621  3474.270396
    MoClusterin        0.633914  3481.599008
    ```

=== "Annotation"

    ``` py
    You are using extended sheets.
    You have selected the minmax normalization method.
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Data summary:
    Number of samples: 54
    Number of features: 419
    You have the samples: ['HuApoA1', 'MoApoA1', 'HuClusterin', 'MoClusterin']
    PCSER predictions: 
       stealth_effect          MFI
    0        0.634621  3474.237063
    1        0.634621  3474.237063
    2        0.634621  3474.237063
    3        0.625302  3570.794892
    4        0.627158  3551.566663
    ```