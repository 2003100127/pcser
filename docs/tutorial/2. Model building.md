We offer interfaces to build models using proteomics features from `Composition` and `Annotation`, respectively. The model is built with random forest using [scikit-learn](https://scikit-learn.org/stable/index.html).

# Usage
Training a model for protein corona stealth effect prediction using the following command(s).

=== "Composition"

    ``` py
    import pcser as pcs

    pcs.load.train(
        data_ref_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/Proteomics_07262023_rv_C57BL6_spl54.xlsx',
        sv_fp='D:/Document/Programming/Python/pcser/pcser/data/',  # None to('data/')
        is_norm=True,
        norm_met='minmax',  # minmax std maxabs
        mode='compo',  # compo annot
        mark='spl54',  # spl54 spl63
        seed=4,
        version='extended',  # extended old
    )
    
    ```

=== "Annotation"

    ``` py
    import pcser as pcs

    pcs.load.train(
        data_ref_fpn='D:/Document/Programming/Python/pcser/pcser/data/hu_macrophage/Proteomics_07262023_rv_C57BL6_spl54.xlsx',
        sv_fp='D:/Document/Programming/Python/pcser/pcser/data/',  # None to('data/')
        is_norm=True,
        norm_met='minmax',  # minmax std maxabs
        mode='annot',  # compo annot
        mark='spl54',  # spl54 spl63
        seed=4,
        version='extended',  # extended old
    )
            
    ``` 


# Attributes
!!! Illustration

    === "Unordered List"
        
        ``` c++ 
        data_ref_fpn: full path to data used for training and as a reference for further use
        sv_fp: full path to save data. Please note that it will save the training data and resulting data if it is not set as None.
        is_norm: if data is normalised. Default: True
        norm_met: normalisation method. It can be minmax, std, or maxabs.
        mode: composition or annotation. It can be compo or annot. Default: compo 
        mark: mark for denoting and being part of file name.
        seed: seed to shufle data and train models. Default: 4
        version: It can be extended or old. extended will include added PBS data. Default: 'extended'
        
        ```

    === "Ordered List"

        ``` title=markdown
        1. Sed sagittis eleifend rutrum
        2. Donec vitae suscipit est
        3. Nulla tempor lobortis orci
        ```


# Output

=== "Composition"

    ``` py
    You are using extended sheets.
    You have selected the minmax normalization method.
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option('future.no_silent_downcasting', True)`
    Data summary:
    Number of samples: 54
    Number of features: 419
    No.0-fold
    No.1-fold
    No.2-fold
    No.3-fold
    No.4-fold
    R2: [0.719195712657728, 0.900083370425819, 0.8576982579995922, 0.8888953060732934, 0.8434965706379328]
    ===>Average: 0.8418738435588731
    ===>Max: 0.900083370425819
    MSE: [0.017028147072777784, 0.00450681629612716, 0.0102981298422141, 0.0025978378573899537, 0.0040540390434156606]
    ===>Average: 0.007696994022384933
    ===>Max: 0.017028147072777784
    Models and training data haven been saved!
    Models have been built!
    [RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4)]
    
    ```

=== "Annotation"

    ``` py
    You are using extended sheets.
    You have selected the minmax normalization method.
    When grouping with a length-1 list-like, you will need to pass a length-1 tuple to get_group in a future version of pandas. Pass `(name,)` instead of `name` to silence this warning.
    
    Data summary:
    Number of samples: 54
    Number of features: 10
    No.0-fold
    No.1-fold
    No.2-fold
    No.3-fold
    No.4-fold
    R2: [0.6010432275256226, 0.715713292853321, 0.889244336608078, 0.8259543343330067, 0.8736655672428307]
    ===>Average: 0.7811241517125718
    ===>Max: 0.889244336608078
    MSE: [0.012311363231305883, 0.009686289065792941, 0.006312966249780384, 0.006861688197711371, 0.006450340068200194]
    ===>Average: 0.008324529362558154
    ===>Max: 0.012311363231305883
    Models and training data haven been saved!
    Models have been built!
    [RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4),
     RandomForestRegressor(max_depth=10, random_state=4)]
            
    ```